<div id="word-card-carousel<%= word.id %>" class="carousel slide carousel-word-card" data-ride="carousel" data-interval='false'>
    <% user_word = UserWord.where(user: current_user, word: word).take %>

    <ol class="carousel-indicators">
      <% case user_word&.state %>
      <% when "nou" %>
        <% if word.meaning.nou.length > 1 %>
          <% word.meaning.nou&.first(3).each_with_index do |x, z|  %>
            <li data-target="#word-card-carousel<%= word.id %>" data-slide-to="<%= z %>" class="<%= 'active' if z == 0 %>"></li>
          <% end %>
        <% end %>
      <% when "vrb" %>
        <% if word.meaning.vrb.length > 1 %>
          <% word.meaning.vrb&.first(3).each_with_index do |x, z|  %>
            <li data-target="#word-card-carousel<%= word.id %>" data-slide-to="<%= z %>" class="<%= 'active' if z == 0 %>"></li>
          <% end %>
        <% end %>
      <% when "adj" %>
        <% if word.meaning.adj.length > 1 %>
          <% word.meaning.adj&.first(3).each_with_index do |x, z|  %>
            <li data-target="#word-card-carousel<%= word.id %>" data-slide-to="<%= z %>" class="<%= 'active' if z == 0 %>"></li>
          <% end %>
        <% end %>
      <% when "adv" %>
        <% if word.meaning.adv.length > 1 %>
          <% word.meaning.adv&.first(3).each_with_index do |x, z|  %>
            <li data-target="#word-card-carousel<%= word.id %>" data-slide-to="<%= z %>" class="<%= 'active' if z == 0 %>"></li>
          <% end %>
        <% end %>
      <% end %>
    </ol>

    <div class="carousel-inner">

    <%= render 'shared/carousel-tabs', word: word, user_word: user_word %>
      <% case user_word&.state %>
      <% when "nou" %>
        <% word.meaning.nou&.first(3)&.each_with_index do |meaning, i| %>
          <div class="carousel-item <%= 'active' if i == 0 %>">
            <%= render 'shared/word-card', word: word, index: i, meaning: meaning %>
          </div>
        <% end %>
      <% when "vrb" %>
        <% word.meaning.vrb&.first(3)&.each_with_index do |meaning, i| %>
          <div class="carousel-item <%= 'active' if i == 0 %>">
            <%= render 'shared/word-card', word: word, index: i, meaning: meaning %>
          </div>
        <% end %>
      <% when "adj" %>
        <% word.meaning.adj&.first(3)&.each_with_index do |meaning, i| %>
          <div class="carousel-item <%= 'active' if i == 0 %>">
            <%= render 'shared/word-card', word: word, index: i, meaning: meaning %>
          </div>
        <% end %>
      <% when "adv" %>
        <% word.meaning.adv&.first(3)&.each_with_index do |meaning, i| %>
          <div class="carousel-item <%= 'active' if i == 0 %>">
            <%= render 'shared/word-card', word: word, index: i, meaning: meaning %>
          </div>
        <% end %>
      <% end %>
    </div>
    <a class="carousel-control-prev" href="#word-card-carousel" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#word-card-carousel" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
